jQuery(function($){	ProblemView = Backbone.View.extend({		tagName : "div",		id : "problem",		template : Templates.problem,				render : function(){			$("#next").addClass("hidden");			this.$el.html(this.template(this.model.toJSON()));			return this;		}	});		ChoiceView = Backbone.View.extend({		tagName : "div",		className : "choice",		template : Templates.choice,				events : {			"click" : "choose"		},				choose : function(e){			$("#next").removeClass("hidden");		},				render : function(){			this.$el.html(this.template(this.model.toJSON()));			return this;		}	});		var temp;		ChoicesView = Backbone.View.extend({		tagName : "div",		id : "choices",				initialize : function(){			temp = new Temp();			temp.set("choicesView",this);		},				render : function(){			this.collection.each(function(choice){				this.$el.append(new ChoiceView({model:choice}).render().el);			},this);			return this;		}	});			var index = 1;		ImageView = Backbone.View.extend({		tagName : "div",		template : Templates.image,				events : {			"click #next" : "nextProblem"		},				nextProblem : function(){			var choicesView = temp.get("choicesView");			var collection = choicesView.collection;			var choiceViews = choicesView.$el.find("input");			for(var i=0;i<choiceViews.length;i++){				(function(choiceEl){					if(choiceEl.checked){						var choice = collection.at(i);						choice.set("user_choice",1);					}				})(choiceViews[i])			}						var current_problem = this.collection.at(index-1);			for(var j=0;j<collection.length;j++){				var model = collection.at(j);				if(model.get("answer")==1){					if(model.get("user_choice")==1){						current_problem.set("user_correct",1);					}else{						current_problem.set("user_correct",0);					}				}			}						if(current_problem.get("user_correct")==1){				alert("这道题你答对了哦！！");			}else{				alert("这道题你打错了~");			}						if(index == this.collection.length){				alert("这已经是最后一道题了");								var user_correct = 0;				var totalCount = this.collection.length;				this.collection.each(function(problem){					if(problem.get("user_correct")==1){						user_correct++;					}				});								var user_score = (user_correct/totalCount)*100;				alert("你一共做对了"+user_correct+"道题！！！,得了"+user_score+"分");				this.model.set({					user_correct : user_correct,					user_score : user_score				});				return;			}						var problem = this.collection.at(index);			var choices = new Choices(problem.get("choices"));						var container = $("#content");			container.empty();						var problemView = new ProblemView({				model : problem			});			var choicesView = new ChoicesView({				collection : choices			});						container.append(problemView.render().el);			container.append(choicesView.render().el);						index = index + 1;					},				render : function(){			this.$el.html(this.template());			return this;		}	});});