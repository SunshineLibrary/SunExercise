<!DOCTYPE html>
<html>
<head>
    <title>阳光提高班</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <link href="js/libs/videojs/video-js.css" rel="stylesheet">
    <script src="js/libs/videojs/video.js"></script>

    <script src="js/libs/jquery/jquery-1.9.1.js"></script>
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <script src="js/libs/bootstrap/bootstrap.min.js"></script>

    <link href="css/app.css" rel="stylesheet">
    <script src="js/libs/underscore/underscore.js"></script>
    <script src="js/libs/backbone/backbone.js"></script>

    <script src="js/utils.js"></script>
    <script src="js/views.js"></script>
    <script src="js/models.js"></script>
    <script src="js/sun.js"></script>
    <script src="js/app.js"></script>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <div class="nav-collapse collapse" id="header">
                loading header
            </div>
        </div>
    </div>
</div>
<div class="container" id="content_container">
    <div id="content">loading content</div>
</div>

<!--<video id="my_video_1" class="video-js vjs-default-skin" controls-->
<!--preload="auto" width="640" height="264"-->
<!--data-setup="{}">-->
<!--<source src="file://sdcard/Movies/video.mp4" type='video/mp4'>-->
<!--</video>-->

<div class="navbar navbar-inverse navbar-fixed-bottom">
    <div class="navbar-inner">
        <div class="container">
            <div id="footer" class="pull-left" style="height:60px;margisn-top:15px">loading footer</div>
            <div style="text-align: right">
                <button class="btn" onclick="Sun.resetuserdata()">reset user data</button>
                <button class="btn" onclick="Sun.showuserdata()">show user data</button>
            </div>
        </div>
    </div>
</div>

<!--Many templates-->
<script type="text/template" id="th_subjects">
    <ul class="nav">
        <li>
            <a>阳光提高班</a>
        </li>
        <%
        for(var i=0 ; i < target.length ; i++){
        subject = target.at(i)
        %>
        <li class="<% if(currentSubjectId == subject.get('id')){ %>active<% } %>">
            <a href="#subject/<%=subject.get('id')%>"><%= subject.get('name') %></a>
        </li>
        <% } %>
    </ul>
    <ul class="nav pull-right">
        <li>
            <div class="btn" onclick="Interfaces.sync()">同步数据</div>
        </li>
    </ul>
</script>

<script type="text/template" id="th_lesson">
    <ul class="nav">
        <li>
            <a><%= target.get('name')%></a>
        </li>
    </ul>
</script>

<script type="text/template" id="tc_subject">
    <% _.each(target.get('monthLessons'),function(monthLesson){ %>
    <h2><%=monthLesson[0].get('month')%>月</h2>

    <div class="row">
        <% _.each(monthLesson,function(lesson){ %>
        <div class="span3">
            <div class="well">
                <h4 style="text-wrap:pre-line"><%=lesson.get("name")%></h4>

                <div class="btn btn-large" onclick="Interfaces.download('<%=lesson.id%>')">下载</div>
                <a class="btn btn-primary btn-large" href="#lesson/<%=lesson.id%>">进入</a>
            </div>
        </div>
        <% }) %>
    </div>
    <% }) %>
</script>

<script type="text/template" id="tc_lesson">
    <% _.each(target.get("stages"),function(stage){ %>
    <div class="span3">
        <div class="stage_circle_0">
            <h3 class="tile-title"><%=stage.id%></h3>

            <p class="wrap-text"><%=JSON.stringify(stage)%></p>
            <a class="btn btn-primary btn-large btn-block" href="#stage/<%=stage.id%>">进入</a>
        </div>
    </div>
    <% }) %>
</script>

<script type="text/template" id="tc_problem_singlechoice">
    <div class="span10">
        <h3><%=target.get('id')%>
            <% if(target.get('userdata')==true){%>(completed)<%}%>
        </h3>

        <p>
            <% userdata = target.get('userdata') %>
            userdata: <%=JSON.stringify(userdata) %>
        </p>

        <p>
            correct answers: <%=target.correct_answers %>
        </p>

        <p>
            body: <%=target.get('body')%>
        </p>

        <p>
            <%
            for(var i =0 ; i < target.get("choices").length; i++) {
            var choice = target.get("choices")[i]
            %>

        <div class="palette palette-clouds">
            <label class="radio">
                <input class="answer"
                       id="<%=choice.id%>"
                       answer="<%= choice.answer%>"
                       type="radio"
                       name="optionsRadios">
                <%= target.get('choices')[i].display_text %>
            </label>
        </div>
        <% } %>
        </p>

        <div class="">
            <div id="grading_result" class="pull-left">
                <% if(userdata.correct==true) { %>
                Right:)
                <% } else if (userdata.correct==false) { %>
                WRONG!!!
                <% } %>
            </div>
            <div class="pull-right">
                <% if(userdata.completed == true) { %>
                <a class="btn btn-large"
                   onclick="nextMaterial('problem','<%=target.get('id')%>')">继续</a>
                <% }else{ %>
                <a id="submit_answer" class="btn btn-large  btn-primary"
                   onclick="grading('<%=target.get('id')%>')">提交答案</a>
                <% } %>
            </div>
        </div>
    </div>

</script>

<script type="text/template" id="tc_problem_singlefilling">
    <p><%=target.get("body")%></p>
    <%=JSON.stringify(target)%>
    <% userdata = target.get('userdata') %>
    <% if(userdata.completed == true) { %>
    <a class="btn btn-large"
       onclick="nextMaterial('problem','<%=target.get('id')%>')">继续</a>
    <% }else{ %>
    <a id="submit_answer" class="btn btn-large  btn-primary"
       onclick="grading('<%=target.get('id')%>')">提交答案</a>
    <% } %>
</script>

<script type="text/template" id="tc_stages"></script>
<script type="text/template" id="tc_month"></script>
<script type="text/template" id="tc_activity"></script>
<script type="text/template" id="tc_section"></script>
<script type="text/template" id="tc_summary">
    summary
    <%=JSON.stringify(target)%>
    <% %>
    <a class="btn btn-large" href="#section/<%=target.get('section_id')%>">继续</a>

</script>
<script type="text/template" id="tc_problem_multichoice"></script>
<script type="text/template" id="tc_video"></script>

<script type="text/template" id="tf_lesson"></script>
<script type="text/template" id="tf_subject"></script>
<script type="text/template" id="tf_problem_singlechoice">
</script>

</body>
</html>